<html>
<head>
	<title>Forager's Map of Seattle</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
	
	
	
</head>

<body>
	<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
	
	<script src="parks.js"></script>
	<script src="paths.js"></script>
	<script src="plants.js"></script>
	<div id="map" style="width:600px; height: 400px; margin: auto"></div>
	<script>
		var map = L.map('map', {center:[47.67220771982475, -122.30778694152833], zoom: 15});
		L.tileLayer('https://{s}.tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=e7f9937afc06467082eb0adb4b004a99').addTo(map);
		
					
		
		
		// hover function
		function happenHover(feature,layer){ 
			layer.bindPopup('<b>'+ feature.properties.name + '</b>'+ '<br>' + feature.properties.PopupContents, {closeButton: true});
			layer.on('mouseover', function(){layer.openPopup()});
			layer.on('mouseover', function(e) {newStyle(e)});
			layer.on('mouseout', function(e) {oldStyle(e)});
			layer.on('mouseout', function() {layer.closePopup()});
		}
		
		function newStyle(e){e.target.setStyle({color:"red", fillColor: "yellow"});}
		function oldStyle(e){e.target.setStyle({color: "brown", fillColor: "green"});}
		
		function addDesc(feature, layer) {
			layer.bindPopup('<b>'+ feature.properties.name + '</b>', {closeButton: true});	
		}
		
		function defaultStyle(feature) {
			return {
			fillColor: feature.properties.fill,
			weight: 2,
			opacity: 1,
			color: feature.properties.stroke,
			fillOpacity: 0.5};
		}
		
		function pathStyle(feature) {
			return {
			fillColor: feature.properties.fill,
			weight: 2,
			opacity: 1,
			color: feature.properties.stroke,
			fillOpacity: 0.5,
			dashArray:"5,5"};
		}
		
		function plantStyle(feature) {
			return {"marker-color": "#008000",
        "marker-size": "medium",
        "marker-symbol": "garden"}
			
		}
		
		function walk() {
			pathsLayer.addTo(map);
			map.removeLayer(parksLayer);
		}
		
		function conditions() {
			parksLayer.addTo(map);
			map.removeLayer(pathsLayer);
		}
		
		
		var parksLayer = L.geoJSON(parks, {style: defaultStyle, onEachFeature: happenHover}).addTo(map);
		var pathsLayer = L.geoJSON(paths, {style: pathStyle, onEachFeature: addDesc});
		
		
		// sunset point
		var popup = L.popup();

		function onMapClick(e) {
			var message = headHome(e.latlng);
			popup
			.setLatLng(e.latlng)
			.setContent("You're current location is " + e.latlng.toString() + "<br><b>" + message + "</b>")  //this.getLatLng() don't work
			//.setContent("Sunset at " + L.sun.sunset(e.latlng))  //this.getLatLng() don't work
			.openOn(map);
		}
		
		function headHome(latlng) {
			var message = "Directions: ";
			if (latlng.lat > 47.6715986) {
				message = message + "Head South * ";
			} else if (latlng.lat < 47.6715986) {
				message = message + "Head North * ";
			} else {
				message = message + "You're on the right latitude!  ";
			}
			
			if (latlng.lng > -122.3070282) {
				message = message + "Head West";
			} else if (latlng.lng < -122.3070282) {
				message = message + "Head East  ";
			} else {
				message = message + "You're on the right meridian!  ";
			}
			return message;
		}

		map.on('click', onMapClick);

		
		
		var homeMarker = L.marker([47.6715986, -122.3070282], {draggable:true}).addTo(map).bindPopup("<b>Home!</b>").openPopup();
		
		
		
		// points of plants IDed
		
		
			
			
		var fernIcon = L.icon({ iconUrl: 'https://plants.usda.gov/gallery/standard/atfi_003_shp.jpg', 
		iconSize: [30,30],});
		var markerFern1 = L.marker([47.6730927122554, -122.31273293495177], {icon: fernIcon, draggable:true, title: 'Lady Fern', alt:'fern'}).addTo(map).bindPopup("<b>Lady Fern</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=ATFI'>Athyrium filix-femina</href>");
		
		var markerFern2 = L.marker([47.671557511740474, -122.30379581451415], {icon: fernIcon, draggable:true, title: 'Lady Fern', alt:'fern'}).addTo(map).bindPopup("<b>Lady Fern</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=ATFI'>Athyrium filix-femina</href>");
		
		var skunkIcon = L.icon({ iconUrl: 'https://plants.usda.gov/gallery/standard/syfo_001_svp.jpg', 
		iconSize: [30,30],});
		var markerPlant3 = L.marker([47.672074066602235, -122.30598986148834], {icon: skunkIcon, draggable:true, title: 'Skunk Cabbage', alt:'skunk cabbage'}).addTo(map).bindPopup("<b>Skunk Cabbage</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=syfo'>Symplocarpus foetidus</href>");
		var markerPlant9 = L.marker([47.65733760290902, -122.2874665260315], {icon: skunkIcon, draggable:true, title: 'Skunk Cabbage', alt:'skunk cabbage'}).addTo(map).bindPopup("<b>Skunk Cabbage</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=syfo'>Symplocarpus foetidus</href>");
		
		var flowerIcon = L.icon({ iconUrl: 'https://plants.usda.gov/gallery/standard/taof_001_shp.jpg', 
		iconSize: [30,30],});
		var markerPlant4 = L.marker([47.664690097346025, -122.31883227825165], {icon: flowerIcon, draggable:true, title: 'Common Dandelion', alt:'dandelion'}).addTo(map).bindPopup("<b>Common Dandelion</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=taof'>Taraxacum officinale</href>");
		
		var markerPlant5 = L.marker([47.66790174659008, -122.29474067687988], {icon: flowerIcon, draggable:true, title: 'Common Dandelion', alt:'dandelion'}).addTo(map).bindPopup("<b>Common Dandelion</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=taof'>Taraxacum officinale</href>");
		
		var markerPlant6 = L.marker([47.68055856115845, -122.31482505798338], {icon: flowerIcon, draggable:true, title: 'Common Dandelion', alt:'dandelion'}).addTo(map).bindPopup("<b>Common Dandelion</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=taof'>Taraxacum officinale</href>");
		
		
		var mushroomIcon = L.icon({ iconUrl: 'http://media.eol.org/content/2011/11/02/06/02889_260_190.jpg', 
		iconSize: [30,30],});
		var markerPlant7 = L.marker([47.66527174926404, -122.29109287261963], {icon: mushroomIcon, draggable:true, title: 'Chanterelle Mushroom', alt:'Chanterelle'}).addTo(map).bindPopup("<b>Chanterelle Mushroom</b> <br> <a href='http://eol.org/pages/6666298/details'>Cantharellus cibarius</href>");	
	
		var markerPlant8 = L.marker([47.65707744654729, -122.29270219802856], {icon: mushroomIcon, draggable:true, title: 'Chanterelle Mushroom', alt:'Chanterelle'}).addTo(map).bindPopup("<b>Chanterelle Mushroom</b> <br> <a href='http://eol.org/pages/6666298/details'>Cantharellus cibarius</href>");


		var catIcon = L.icon({ iconUrl: 'https://plants.usda.gov/gallery/standard/tyla_006_svp.jpg', 
		iconSize: [30,30],});
		var markerPlant10 = L.marker([47.655357491321425, -122.28963375091553], {icon: catIcon, draggable:true, title: 'Broadleaf Cattail', alt:'cattail'}).addTo(map).bindPopup("<b>Broadleaf Cattail</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=tyla'>Typha latifolia</href>");	
		
		var markerPlant11 = L.marker([47.65411446320229, -122.29270219802856], {icon: catIcon, draggable:true, title: 'Broadleaf Cattail', alt:'cattail'}).addTo(map).bindPopup("<b>Broadleaf Cattail</b> <br> <a href='https://plants.usda.gov/core/profile?symbol=tyla'>Typha latifolia</href>");
		
				
		
	</script>

	
	
	<p><center>
	<button onclick="walk()">Show me some pleasant rambles.</button>
	<button onclick="conditions()">What am I likely to find here?</button>
	</center></p>
	
	<h><center><b>Celine's Project Description</b></center></h>
	<p></p>
	<p><b>Purpose:</b></p>
	<p>To provide locations of tasty wild foods with images and links to identification guides. Locations where edible species have been found are marked with images on the map. Likely places to find edible plants in the North Seattle area are outlined as polygons. Walking trails and bike paths can be used to navigate between parks. Targeted users are hipsters, hippies, and rambling enthusiasts
Users are amateur plant-hunters, so I've common as well as scientific names. Pictures are used for visual appeal and to aid in identification.
	</p>
	<p></p>
	<p><b>Styling:</b></p>
	<p>I used the Neighborhood basemap to provide contextual details without over-emphasizing roads and landscape features. The colors are all natural tones such as browns, blues, and greens. Trails used to navigate within park features are blue, while transportation trails are red.</p>
	<p></p>
	<p><b>New Capability:</b></p>
	<p>The new feature I added is a directional locator (useful for the lost wanderer!). When the user clicks anywhere on the map the locator will print the direction (N/S and E/W) that the user should walk in order to reach home. The home location is its own marker on the map, currently set to Ravenna Park. I tried to use the leaflet.draw plugin to allow users to add additional points when they observed new instances of tasty edibles; however, I was unable to load the plugin. I followed online advice forums on loading, but could not get any part of the editor bar to load. I susspect that I might have been referencing source files for an outdated version of the plugin, but was unable to find a new example that worked. I hope that this directional locator will be useful to all who wander and <i>are</i> lost.</p>
	
	
</body>
</html>
